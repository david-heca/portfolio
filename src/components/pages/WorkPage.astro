---
import { Image } from "astro:assets";
import { useTranslations } from "../../i18n/utils";
import {
  PiBriefcase,
  PiMapPin,
  PiCalendar,
  PiLightning,
  PiStack,
} from "react-icons/pi";

export interface Props {
  lang: "es" | "en";
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const experiences = [
  {
    id: 1,
    company: "BAACC Systems S.A. de C.V.",
    totalPeriod: lang === "es" ? "2023 Sep - Actualidad" : "Sep 2023 - Present",
    totalDuration: lang === "es" ? "2 años 6 meses" : "2 yrs 6 mos",
    location:
      lang === "es" ? "Estado de México, México" : "Mexico State, Mexico",
    workMode: lang === "es" ? "Presencial" : "On-site",
    logo: "/assets/company/baacc.webp",
    roles: [
      {
        title:
          lang === "es"
            ? "Arquitecto de Soluciones de IA"
            : "AI Solutions Architect",
        period: lang === "es" ? "Mar 2025 - Actualidad" : "Mar 2025 - Present",
        duration: lang === "es" ? "1 año" : "1 yr",
        type: lang === "es" ? "Tiempo Completo" : "Full-time",
        location: lang === "es" ? "México" : "Mexico",
        achievements:
          lang === "es"
            ? [
                "Diseño e implementación de aplicaciones inteligentes utilizando LLMs",
                "Integración de servidores y clientes MCP para habilitar flujos de trabajo autónomos",
                "Diseño y desarrollo de arquitecturas RAG (Retrieval-Augmented Generation)",
                "Evaluación continua e investigación de nuevas tecnologías en IA generativa y MLOps",
              ]
            : [
                "Design and implementation of intelligent applications using LLMs",
                "Integration of MCP servers and clients to enable autonomous workflows",
                "Design and development of RAG (Retrieval-Augmented Generation) architectures",
                "Continuous evaluation and research of new technologies in generative AI and MLOps",
              ],
        technologies: ["LLM", "MCP", "RAG", "MLOps", "APIs"],
      },
      {
        title: lang === "es" ? "Fullstack Developer" : "Fullstack Developer",
        period: lang === "es" ? "Ene 2024 - Mar 2025" : "Jan 2024 - Mar 2025",
        duration: lang === "es" ? "1 año 3 meses" : "1 yr 3 mos",
        type: lang === "es" ? "Tiempo Completo" : "Full-time",
        location: lang === "es" ? "Estado de México" : "Mexico State",
        achievements:
          lang === "es"
            ? [
                "Desarrollo de aplicaciones de escritorio con .NET y Python para entornos industriales",
                "Creación de aplicaciones web con JavaScript, .NET y DevExpress",
                "Diseño y administración de bases de datos en SQL Server y PostgreSQL",
                "Desarrollo de aplicaciones móviles Android con RFID para seguimiento y trazabilidad",
              ]
            : [
                "Desktop apps with .NET and Python for industrial environments",
                "Web apps with JavaScript, .NET and DevExpress",
                "Database design and administration in SQL Server and PostgreSQL",
                "Android mobile apps with RFID for tracking and traceability",
              ],
        technologies: [".NET", "Python", "SQL Server", "PostgreSQL", "Android"],
      },
      {
        title:
          lang === "es"
            ? "Fullstack Developer Jr."
            : "Junior Fullstack Developer",
        period: lang === "es" ? "Sep 2023 - Ene 2024" : "Sep 2023 - Jan 2024",
        duration: lang === "es" ? "5 meses" : "5 mos",
        type: lang === "es" ? "Prácticas" : "Internship",
        location: lang === "es" ? "Estado de México" : "Mexico State",
        achievements:
          lang === "es"
            ? [
                "Apoyo en desarrollo de módulos web y APIs internas",
                "Mantenimiento de bases de datos y documentación técnica",
              ]
            : [
                "Support in web module development and internal APIs",
                "Database maintenance and technical documentation",
              ],
        technologies: ["MVC", "SQL Server", "APIs"],
      },
    ],
  },
  {
    id: 2,
    company: "DEC Marketing",
    totalPeriod: "Mar 2022 - Sep 2023",
    totalDuration: lang === "es" ? "1 año 7 meses" : "1 yr 7 mos",
    location:
      lang === "es" ? "Ciudad de México, México" : "Mexico City, Mexico",
    workMode: lang === "es" ? "Remoto" : "Remote",
    logo: "/assets/company/dec.webp",
    roles: [
      {
        title: lang === "es" ? "Web Developer Jr." : "Junior Web Developer",
        period: "Mar 2022 - Sep 2023",
        duration: lang === "es" ? "1 año 7 meses" : "1 yr 7 mos",
        type: lang === "es" ? "Prácticas" : "Internship",
        location: lang === "es" ? "Ciudad de México" : "Mexico City",
        achievements:
          lang === "es"
            ? [
                "Desarrollo y soporte de sitios web con HTML, CSS, JavaScript y CMS (WordPress, Joomla, OpenCart)",
                "Administración de hosting, certificados de seguridad y dominios",
                "Gestión de cuentas de correo electrónico corporativas",
              ]
            : [
                "Website development and support with HTML, CSS, JavaScript and CMS (WordPress, Joomla, OpenCart)",
                "Hosting, security certificates and domain administration",
                "Corporate email account management",
              ],
        technologies: ["HTML", "CSS", "JavaScript", "WordPress", "Joomla"],
      },
    ],
  },
];
---

<section>
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="animate-slide-up text-center mb-12">
      <h1
        class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4"
      >
        {t("work.title")}
      </h1>
      <p class="text-xl text-zinc-500 dark:text-zinc-400">
        {t("work.subtitle")}
      </p>
    </div>

    <!-- Experience Cards Grid -->
    <div class="space-y-8">
      {
        experiences.map((exp) => (
          <div class="group rounded-3xl bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 p-6 md:p-8">
            {/* Company Header */}
            <div class="flex flex-col md:flex-row gap-5 md:gap-6">
              <div class="shrink-0">
                {exp.logo ? (
                  <div class="w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700">
                    <Image
                      src={exp.logo}
                      alt={`${exp.company} logo`}
                      width={80}
                      height={80}
                      class="w-full h-full object-contain"
                      loading="eager"
                    />
                  </div>
                ) : (
                  <div class="w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-linear-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                    <span class="text-white font-bold text-2xl">
                      {exp.company.charAt(0)}
                    </span>
                  </div>
                )}
              </div>

              <div class="flex-1 min-w-0">
                <h3 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white">
                  {exp.company}
                </h3>
                <div class="flex flex-wrap gap-2 mt-2">
                  <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                    <PiCalendar className="w-4 h-4 text-blue-500" />
                    {exp.totalPeriod}
                  </span>
                  <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                    {exp.totalDuration}
                  </span>
                  <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                    <PiMapPin className="w-4 h-4 text-gray-500" />
                    {exp.location}
                  </span>
                  <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs md:text-sm font-medium text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800">
                    {exp.workMode}
                  </span>
                </div>
              </div>
            </div>

            {/* Roles Timeline */}
            <div class="mt-6 space-y-5">
              {exp.roles.map((role, roleIndex) => (
                <div class="relative pl-4 md:pl-6">
                  <div class="absolute left-0 top-2 w-2 h-2 rounded-full bg-blue-500" />
                  {roleIndex !== exp.roles.length - 1 && (
                    <div class="absolute left-0.75 top-4 bottom-0 w-px bg-gray-200 dark:bg-gray-700" />
                  )}

                  <div class="bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 md:p-5">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
                      <h4 class="text-base md:text-lg font-semibold text-gray-900 dark:text-white">
                        {role.title}
                      </h4>
                      <div class="flex flex-wrap gap-2">
                        <span class="inline-flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300">
                          <PiCalendar className="w-3.5 h-3.5" />
                          {role.period}
                        </span>
                        <span class="inline-flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300">
                          {role.duration}
                        </span>
                      </div>
                    </div>

                    <div class="flex flex-wrap gap-2 mt-2">
                      <span class="inline-flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs font-medium text-blue-700 dark:text-blue-300">
                        <PiBriefcase className="w-3.5 h-3.5" />
                        {role.type}
                      </span>
                      <span class="inline-flex items-center gap-2 px-3 py-1 bg-white dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                        <PiMapPin className="w-3.5 h-3.5" />
                        {role.location}
                      </span>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4 mt-4">
                      <div>
                        <div class="flex items-center gap-2 mb-2">
                          <div class="p-1.5 rounded-lg bg-green-100 dark:bg-green-900/30">
                            <PiLightning className="w-4 h-4 text-green-600 dark:text-green-400" />
                          </div>
                          <h5 class="text-sm font-semibold text-gray-900 dark:text-white">
                            {lang === "es" ? "Logros" : "Highlights"}
                          </h5>
                        </div>
                        <ul class="space-y-2">
                          {role.achievements.map((achievement) => (
                            <li class="flex items-start gap-3">
                              <div class="w-1.5 h-1.5 bg-green-500 rounded-full mt-2 shrink-0" />
                              <span class="text-xs md:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                                {achievement}
                              </span>
                            </li>
                          ))}
                        </ul>
                      </div>

                      <div>
                        <div class="flex items-center gap-2 mb-2">
                          <div class="p-1.5 rounded-lg bg-purple-100 dark:bg-purple-900/30">
                            <PiStack className="w-4 h-4 text-purple-600 dark:text-purple-400" />
                          </div>
                          <h5 class="text-sm font-semibold text-gray-900 dark:text-white">
                            {lang === "es" ? "Stack" : "Stack"}
                          </h5>
                        </div>
                        <div class="flex flex-wrap gap-2">
                          {role.technologies.map((tech) => (
                            <span class="px-2.5 py-1 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-medium border border-gray-200 dark:border-gray-700">
                              {tech}
                            </span>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
