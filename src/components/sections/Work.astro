---
import { Image } from "astro:assets";
import { useTranslations } from "@i18n/utils";
import {
  PiBriefcase,
  PiMapPin,
  PiCalendar,
  PiLightning,
  PiStack,
} from "react-icons/pi";

export interface Props {
  lang: "es" | "en";
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const experiences = [
  {
    id: 1,
    company: t("work.companies.baacc.name"),
    totalPeriod: t("work.companies.baacc.totalPeriod"),
    totalDuration: t("work.companies.baacc.totalDuration"),
    location: t("work.companies.baacc.location"),
    workMode: t("work.companies.baacc.workMode"),
    logo: "/assets/company/baacc.webp",
    roles: [
      {
        title: t("work.companies.baacc.roles.architect.title"),
        period: t("work.companies.baacc.roles.architect.period"),
        duration: t("work.companies.baacc.roles.architect.duration"),
        type: t("work.companies.baacc.roles.architect.type"),
        location: t("work.companies.baacc.roles.architect.location"),
        achievements: [
          t("work.companies.baacc.roles.architect.achievements.0"),
          t("work.companies.baacc.roles.architect.achievements.1"),
          t("work.companies.baacc.roles.architect.achievements.2"),
          t("work.companies.baacc.roles.architect.achievements.3"),
        ],
        technologies: ["LLM", "MCP", "RAG", "MLOps", "APIs"],
      },
      {
        title: t("work.companies.baacc.roles.fullstack.title"),
        period: t("work.companies.baacc.roles.fullstack.period"),
        duration: t("work.companies.baacc.roles.fullstack.duration"),
        type: t("work.companies.baacc.roles.fullstack.type"),
        location: t("work.companies.baacc.roles.fullstack.location"),
        achievements: [
          t("work.companies.baacc.roles.fullstack.achievements.0"),
          t("work.companies.baacc.roles.fullstack.achievements.1"),
          t("work.companies.baacc.roles.fullstack.achievements.2"),
          t("work.companies.baacc.roles.fullstack.achievements.3"),
        ],
        technologies: [".NET", "Python", "SQL Server", "PostgreSQL", "Android"],
      },
      {
        title: t("work.companies.baacc.roles.junior.title"),
        period: t("work.companies.baacc.roles.junior.period"),
        duration: t("work.companies.baacc.roles.junior.duration"),
        type: t("work.companies.baacc.roles.junior.type"),
        location: t("work.companies.baacc.roles.junior.location"),
        achievements: [
          t("work.companies.baacc.roles.junior.achievements.0"),
          t("work.companies.baacc.roles.junior.achievements.1"),
        ],
        technologies: ["MVC", "SQL Server", "APIs"],
      },
    ],
  },
  {
    id: 2,
    company: t("work.companies.dec.name"),
    totalPeriod: t("work.companies.dec.totalPeriod"),
    totalDuration: t("work.companies.dec.totalDuration"),
    location: t("work.companies.dec.location"),
    workMode: t("work.companies.dec.workMode"),
    logo: "/assets/company/dec.webp",
    roles: [
      {
        title: t("work.companies.dec.roles.webdev.title"),
        period: t("work.companies.dec.roles.webdev.period"),
        duration: t("work.companies.dec.roles.webdev.duration"),
        type: t("work.companies.dec.roles.webdev.type"),
        location: t("work.companies.dec.roles.webdev.location"),
        achievements: [
          t("work.companies.dec.roles.webdev.achievements.0"),
          t("work.companies.dec.roles.webdev.achievements.1"),
          t("work.companies.dec.roles.webdev.achievements.2"),
        ],
        technologies: ["HTML", "CSS", "JavaScript", "WordPress", "Joomla"],
      },
    ],
  },
];
---

<section>
  <!-- Header -->
  <div class="animate-slide-up text-center mb-12">
    <h1
      class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4"
    >
      {t("work.title")}
    </h1>
    <p class="text-xl text-zinc-500 dark:text-zinc-400">
      {t("work.subtitle")}
    </p>
  </div>

  <!-- Experience Cards Grid -->
  <div class="space-y-4 md:space-y-6">
    {
      experiences.map((exp) => (
        <div class="group rounded-3xl bg-gray-50 dark:bg-gray-900 border border-zinc-300 dark:border-zinc-700 p-6 md:p-8">
          {/* Company Header */}
          <div class="flex flex-col md:flex-row gap-5 md:gap-6">
            <div class="shrink-0">
              {exp.logo ? (
                <div class="w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700">
                  <Image
                    src={exp.logo}
                    alt={`${exp.company} logo`}
                    width={80}
                    height={80}
                    class="w-full h-full object-contain"
                    loading="lazy"
                  />
                </div>
              ) : (
                <div class="w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-linear-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                  <span class="text-white font-bold text-2xl">
                    {exp.company.charAt(0)}
                  </span>
                </div>
              )}
            </div>

            <div class="flex-1 min-w-0">
              <h3 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white">
                {exp.company}
              </h3>
              <div class="flex flex-wrap gap-2 mt-2">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                  <PiCalendar className="w-4 h-4 text-blue-500" />
                  {exp.totalPeriod}
                </span>
                <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                  {exp.totalDuration}
                </span>
                <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                  <PiMapPin className="w-4 h-4 text-gray-500" />
                  {exp.location}
                </span>
                <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs md:text-sm font-medium text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800">
                  {exp.workMode}
                </span>
              </div>
            </div>
          </div>

          {/* Roles Timeline */}
          <div class="mt-6 space-y-5">
            {exp.roles.map((role, roleIndex) => (
              <div class="relative pl-4 md:pl-6">
                <div class="absolute left-0 top-2 w-2 h-2 rounded-full bg-blue-500" />
                {roleIndex !== exp.roles.length - 1 && (
                  <div class="absolute left-0.75 top-4 bottom-0 w-px bg-gray-200 dark:bg-gray-700" />
                )}

                <div class="bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 md:p-5">
                  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
                    <h4 class="text-base md:text-lg font-semibold text-gray-900 dark:text-white">
                      {role.title}
                    </h4>
                    <div class="flex flex-wrap gap-2">
                      <span class="inline-flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300">
                        <PiCalendar className="w-3.5 h-3.5" />
                        {role.period}
                      </span>
                      <span class="inline-flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300">
                        {role.duration}
                      </span>
                    </div>
                  </div>

                  <div class="flex flex-wrap gap-2 mt-2">
                    <span class="inline-flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs font-medium text-blue-700 dark:text-blue-300">
                      <PiBriefcase className="w-3.5 h-3.5" />
                      {role.type}
                    </span>
                    <span class="inline-flex items-center gap-2 px-3 py-1 bg-white dark:bg-gray-900 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700">
                      <PiMapPin className="w-3.5 h-3.5" />
                      {role.location}
                    </span>
                  </div>

                  <div class="grid md:grid-cols-2 gap-4 mt-4">
                    <div>
                      <div class="flex items-center gap-2 mb-2">
                        <div class="p-1.5 rounded-lg bg-green-100 dark:bg-green-900/30">
                          <PiLightning className="w-4 h-4 text-green-600 dark:text-green-400" />
                        </div>
                        <h5 class="text-sm font-semibold text-gray-900 dark:text-white">
                          {t("work.labels.highlights")}
                        </h5>
                      </div>
                      <ul class="space-y-2">
                        {role.achievements.map((achievement) => (
                          <li class="flex items-start gap-3">
                            <div class="w-1.5 h-1.5 bg-green-500 rounded-full mt-2 shrink-0" />
                            <span class="text-xs md:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                              {achievement}
                            </span>
                          </li>
                        ))}
                      </ul>
                    </div>

                    <div>
                      <div class="flex items-center gap-2 mb-2">
                        <div class="p-1.5 rounded-lg bg-purple-100 dark:bg-purple-900/30">
                          <PiStack className="w-4 h-4 text-purple-600 dark:text-purple-400" />
                        </div>
                        <h5 class="text-sm font-semibold text-gray-900 dark:text-white">
                          {t("work.labels.stack")}
                        </h5>
                      </div>
                      <div class="flex flex-wrap gap-2">
                        {role.technologies.map((tech) => (
                          <span class="px-2.5 py-1 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-medium border border-gray-200 dark:border-gray-700">
                            {tech}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      ))
    }
  </div>
</section>
