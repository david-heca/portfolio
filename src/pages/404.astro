---
import Layout from "@layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import { PiHouseLine, PiArrowLeft } from "react-icons/pi";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const title = `${t("notFound.heading")} - ${t("notFound.title")}`;
const description = t("notFound.description");
---

<Layout title={title} description={description} lang={lang}>
  <section class="flex items-center justify-center min-h-[70vh] relative">
    <!-- Ambient glow -->
    <div
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-150 h-100 rounded-full opacity-15 pointer-events-none blur-3xl"
      style="background: radial-gradient(ellipse, var(--color-accent), transparent 70%);"
    >
    </div>

    <div class="relative z-10 text-center max-w-2xl mx-auto px-4">
      <!-- Glitch-style 404 -->
      <div class="relative mb-8">
        <span
          class="font-mono text-xs uppercase tracking-widest block mb-6"
          style={`color: var(--color-accent);`}
        >
          // error.404
        </span>

        <h1
          class="text-[10rem] md:text-[14rem] font-bold leading-none tracking-tighter select-none text-gradient"
          style="line-height: 0.85;"
        >
          404
        </h1>

        <!-- Decorative code lines behind the number -->
        <div
          class="absolute inset-0 flex flex-col items-center justify-center opacity-[0.04] pointer-events-none font-mono text-xs overflow-hidden"
          aria-hidden="true"
        >
          {
            Array.from({ length: 12 }).map((_, i) => (
              <span class="whitespace-nowrap">
                {`${String(i + 1).padStart(2, "0")} | ${"const route = await resolve(request.url);".repeat(3)}`}
              </span>
            ))
          }
        </div>
      </div>

      <!-- Terminal-style message -->
      <div
        class="rounded-2xl p-6 mb-8 text-left font-mono text-sm"
        style={`background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-default);`}
      >
        <div class="flex items-center gap-2 mb-4">
          <span class="w-3 h-3 rounded-full bg-red-500/80"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500/80"></span>
          <span class="w-3 h-3 rounded-full bg-green-500/80"></span>
          <span
            class="ml-2 text-xs"
            style={`color: var(--color-text-tertiary);`}>terminal</span
          >
        </div>
        <div style={`color: var(--color-text-tertiary);`}>
          <p>
            <span style={`color: var(--color-accent);`}>$</span> curl -I {
              Astro.url.pathname
            }
          </p>
          <p class="mt-1">
            <span class="text-red-400">HTTP/1.1 404 Not Found</span>
          </p>
          <p class="mt-2">
            <span style={`color: var(--color-accent);`}>$</span>
            {
              lang === "es"
                ? " # Esta página se fue a tomar un café ☕"
                : " # This page went out for coffee ☕"
            }
          </p>
          <p class="mt-1 animate-pulse">▋</p>
        </div>
      </div>

      <!-- Subtitle -->
      <h2
        class="text-xl md:text-2xl font-bold mb-3 tracking-tight"
        style={`color: var(--color-text-primary);`}
      >
        {t("notFound.subtitle")}
      </h2>

      <p class="mb-10" style={`color: var(--color-text-secondary);`}>
        {t("notFound.description")}
      </p>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
        <button
          onclick="history.back()"
          class="w-full sm:w-auto px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2 group/btn"
          style={`background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-default); color: var(--color-text-secondary);`}
          onmouseenter="this.style.borderColor='var(--color-border-hover)'"
          onmouseleave="this.style.borderColor='var(--color-border-default)'"
        >
          <PiArrowLeft
            className="w-5 h-5 group-hover/btn:-translate-x-1 transition-transform"
          />
          {t("notFound.backButton")}
        </button>

        <a
          href={lang === "es" ? "/" : "/en"}
          class="w-full sm:w-auto px-6 py-3 rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center gap-2 hover:scale-105"
          style="background: linear-gradient(135deg, var(--color-accent), #7C3AED);"
        >
          <PiHouseLine className="w-5 h-5" />
          {t("notFound.homeButton")}
        </a>
      </div>
    </div>
  </section>
</Layout>
