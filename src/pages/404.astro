---
import Layout from "@layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import { PiHouseLine, PiArrowLeft } from "react-icons/pi";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const title = `${t("notFound.heading")} - ${t("notFound.title")}`;
const description = t("notFound.description");
---

<Layout title={title} description={description} lang={lang}>
  <section class="flex items-center justify-center min-h-[70vh] relative overflow-hidden">
    <!-- Ambient glow -->
    <div
      class="hidden md:block absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 sm:w-150 sm:h-100 rounded-full opacity-20 pointer-events-none blur-3xl"
      style="background: radial-gradient(ellipse, var(--color-accent), transparent 70%);"
    >
    </div>

    <div class="relative z-10 text-center max-w-2xl mx-auto px-4">
      <!-- Glitch-style 404 -->
      <div class="relative mb-8">
        <h1
          class="text-[8rem] md:text-[13rem] font-bold tracking-tighter select-none text-gradient relative z-10"
          style="line-height: 0.85;"
        >
          404
        </h1>

        <!-- Decorative code lines behind the number -->
        <div
          class="absolute inset-0 flex flex-col justify-center opacity-[0.06] pointer-events-none font-mono text-[0.5rem] sm:text-xs overflow-hidden"
          aria-hidden="true"
        >
          {
            Array.from({ length: 10 }).map((_, i) => (
              <span class="block whitespace-nowrap px-2">
                {`${String(i + 1).padStart(2, "0")} | const route = await resolve(request.url);`}
              </span>
            ))
          }
        </div>
      </div>

      <!-- Terminal-style message -->
      <div
        class="rounded-2xl p-4 sm:p-6 mb-8 text-left font-mono text-xs sm:text-sm overflow-hidden"
        style={`background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-default);`}
      >
        <div class="flex items-center gap-2 mb-4">
          <span class="w-2.5 h-2.5 rounded-full bg-red-500/80"></span>
          <span class="w-2.5 h-2.5 rounded-full bg-yellow-500/80"></span>
          <span class="w-2.5 h-2.5 rounded-full bg-green-500/80"></span>
          <span
            class="ml-2 text-xs"
            style={`color: var(--color-text-tertiary);`}>terminal</span
          >
        </div>
        <div class="space-y-1" style={`color: var(--color-text-tertiary);`}>
          <p class="truncate">
            <span style={`color: var(--color-accent);`}>$</span>{" "}curl -I {Astro.url.pathname}
          </p>
          <p>
            <span class="text-red-400">HTTP/1.1 404 Not Found</span>
          </p>
          <p>
            <span style={`color: var(--color-accent);`}>$</span>
            {
              lang === "es"
                ? " # Esta página se fue a tomar un café ☕"
                : " # This page went out for coffee ☕"
            }
          </p>
          <p class="animate-pulse">▋</p>
        </div>
      </div>

      <!-- Subtitle -->
      <h2
        class="text-xl md:text-2xl font-bold mb-3 tracking-tight"
        style={`color: var(--color-text-primary);`}
      >
        {t("notFound.subtitle")}
      </h2>

      <p class="mb-10" style={`color: var(--color-text-secondary);`}>
        {t("notFound.description")}
      </p>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
        <button
          onclick="history.back()"
          class="w-full sm:w-auto px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2 group/btn"
          style={`background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-default); color: var(--color-text-secondary);`}
          onmouseenter="this.style.borderColor='var(--color-border-hover)'"
          onmouseleave="this.style.borderColor='var(--color-border-default)'"
        >
          <PiArrowLeft
            className="w-5 h-5 group-hover/btn:-translate-x-1 transition-transform"
          />
          {t("notFound.backButton")}
        </button>

        <a
          href={lang === "es" ? "/" : "/en"}
          class="w-full sm:w-auto px-6 py-3 rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center gap-2 hover:scale-105"
          style="background: linear-gradient(135deg, var(--color-accent), #7C3AED);"
        >
          <PiHouseLine className="w-5 h-5" />
          {t("notFound.homeButton")}
        </a>
      </div>
    </div>
  </section>
</Layout>
