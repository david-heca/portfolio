---
import Layout from "@layouts/Layout.astro";
import { useTranslations } from "@i18n/utils";

// Importar componentes de secciones
import Skills from "@sections/Skills.astro";
import Projects from "@sections/Projects.astro";
import Work from "@sections/Work.astro";
import Education from "@sections/Education.astro";
import Contact from "@sections/Contact.astro";
import Home from "@sections/Home.astro";

export async function getStaticPaths() {
  const pages = ["skills", "projects", "work", "education", "contact"];
  const paths: any[] = [];

  // Página principal en inglés
  paths.push({
    params: { slug: "en" },
    props: { page: "home", lang: "en" },
  });

  // Rutas en español
  pages.forEach((page) => {
    paths.push({
      params: { slug: page },
      props: { page, lang: "es" },
    });
  });

  // Rutas en inglés
  pages.forEach((page) => {
    paths.push({
      params: { slug: `en/${page}` },
      props: { page, lang: "en" },
    });
  });

  return paths;
}

const { page, lang } = Astro.props;
const t = useTranslations(lang);

// Configurar metadatos de página
const getPageMeta = (page: string, lang: "es" | "en") => {
  const baseName = "David Herrera";

  if (page === "home") {
    return {
      title:
        lang === "es"
          ? `${baseName} - Ingeniero en Tecnologías de la Información & Arquitecto de Soluciones IA`
          : `${baseName} - IT Engineer & AI Solutions Architect`,
      description:
        lang === "es"
          ? "Portfolio de David Herrera. Ingeniero especializado en desarrollo de soluciones tecnológicas innovadoras y arquitecturas de inteligencia artificial."
          : "David Herrera's portfolio. Engineer specialized in developing innovative technological solutions and artificial intelligence architectures.",
    };
  }

  const titles = {
    skills:
      lang === "es" ? `Habilidades - ${baseName}` : `Skills - ${baseName}`,
    projects:
      lang === "es" ? `Proyectos - ${baseName}` : `Projects - ${baseName}`,
    work:
      lang === "es" ? `Experiencia - ${baseName}` : `Experience - ${baseName}`,
    education:
      lang === "es" ? `Formación - ${baseName}` : `Education - ${baseName}`,
    contact: lang === "es" ? `Contacto - ${baseName}` : `Contact - ${baseName}`,
  };

  const descriptions = {
    skills:
      lang === "es"
        ? "Tecnologías y habilidades que domino como desarrollador."
        : "Technologies and skills I master as a developer.",
    projects:
      lang === "es"
        ? "Proyectos innovadores desarrollados con las últimas tecnologías."
        : "Innovative projects developed with the latest technologies.",
    work:
      lang === "es"
        ? "Mi experiencia profesional en empresas tecnológicas."
        : "My professional experience in technology companies.",
    education:
      lang === "es"
        ? "Formación académica y certificaciones en tecnología."
        : "Academic background and certifications in technology.",
    contact:
      lang === "es"
        ? "Conectemos y exploremos oportunidades de colaboración."
        : "Let's connect and explore collaboration opportunities.",
  };

  return {
    title: titles[page as keyof typeof titles],
    description: descriptions[page as keyof typeof descriptions],
  };
};

const pageMeta = getPageMeta(page, lang);
---

<Layout title={pageMeta.title} description={pageMeta.description} lang={lang}>
  <!-- Renderizar componente -->
  {page === "home" && <Home lang={lang} />}
  {page === "skills" && <Skills lang={lang} />}
  {page === "projects" && <Projects lang={lang} />}
  {page === "work" && <Work lang={lang} />}
  {page === "education" && <Education lang={lang} />}
  {page === "contact" && <Contact lang={lang} />}
</Layout>
